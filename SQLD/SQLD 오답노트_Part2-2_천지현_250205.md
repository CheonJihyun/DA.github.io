# PART 2 SQL 기본 및 활용

## CHAPTER 2 SQL 활용

### Level Up Test

p171 <span style='color:red'>①</span> - 정답: ②

- 비연관 서브쿼리는 메인쿼리의 컬럼이 포함되지 않아도 됨
- 서브쿼리가 사용 불가한 절은 GROUP BY절

p173 <span style='color:red'>③</span> - 정답: ④

- FROM절에 오는 서브쿼리는 인라인 뷰 (컬럼이 아닌 테이블명이 오는 위치에 사용)
- 스칼라 서브쿼리는 주로 SELECT 절에 위치하지만 컬럼이 올 수 있는 대부분 위치에 사용 가능

p174 <span style='color:red'>③</span> - 정답: ②

- 메인쿼리의 FROM에 들어간 데이터는 모두 출력됨 -> 해당 테이블 기준의 OUTER JOIN

p179 <span style='color:skyblue'>②</span>

p181 <span style='color:red'>②</span> - 정답: ④

- 뷰(View): 특정 SELECT문에 이름을 붙여 재사용이 가능하도록 저장한 오브젝트
- 내부적으로 뷰를 생성하는 SQL을 볼 수 없음 -> 투명성 X
- 뷰의 특징
  - 보안성: 보안이 필요한 컬럼을 제외한 별도의 뷰를 생성하여 제공 가능
  - 독립성: 테이블 스키마 변경시 관련 뷰만 수정 가능
  - 편리성: 복잡한 쿼리 구문을 뷰명으로 단축 가능

p182 <span style='color:red'>①</span> - 정답: ③

- NATURAL JOIN
  - 동일한 컬럼명과 데이터 타입을 갖는 모든 컬럼에 대해 EQUI JOIN 수행
  - EQUI JOIN은 INNER JOIN의 하위 개념 (동일한 값이 있는 행만 반환)
  
p186 <span style='color:skyblue'>②</span>

p186 <span style='color:skyblue'>④</span>

p196 <span style='color:skyblue'>②</span>

|함수|출력형태|
|:----:|:----|
|ROLLUP(A)|- A로 그룹핑- 총 합계|
|ROLLUP(A, B)|- A, B로 그룹핑<br>- A로 그룹핑<br>- 총 합계|
|ROLLUP(A, B, C)|- A, B, C로 그룹핑<br>- A, B로 그룹핑<br>- A로 그룹핑<br>- 총 합계|

p197 <span style='color:skyblue'>①</span>

p205 <span style='color:skyblue'>③</span>

|함수|출력형태|
|:----:|:----|
|CUBE(A)|- A로 그룹핑<br>- 총 합계|
|CUBE(A, B)|- A, B로 그룹핑<br>- A로 그룹핑<br>- B로 그룹핑<br>- 총 합계|
|CUBE(A, B, C)|- A, B, C로 그룹핑<br>- A, B로 그룹핑<br>- A, C로 그룹핑<br>- B, C로 그룹핑<br>- A로 그룹핑<br>- B로 그룹핑<br>- C로 그룹핑<br>- 총 합계|

p206 <span style='color:skyblue'>④</span>

p216 <span style='color:red'>③</span> - 정답: ④

|함수|출력형태|
|:----:|:----|
|GROUPING SETS(A, B)|- A로 그룹핑<br>- B로 그룹핑|
|GROUPING SETS(A, B, ())|- A로 그룹핑<br>- B로 그룹핑<br>- 총 합계|
|GROUPING SETS(A, ROLLUP(B))|- A로 그룹핑<br>- B로 그룹핑<br>- 총 합계|
|GROUPING SETS(A, ROLLUP(B, C))|- A로 그룹핑<br>- `B, C로 그룹핑`<br>- `B로 그룹핑`<br>- 총 합계|
|GROUPING SETS(A, B, ROLLUP(C))|- A로 그룹핑<br>- B로 그룹핑<br>- C로 그룹핑<br>- 총 합계|

- GROUPING SETS는 특정 항목에 대한 소계를 계산하는 함수
- **`빈 인자값 또는 ROLLUP, CUBE 인자값이 들어가지 않으면 총 합계 출력이 안된다`**

<span style="color:orange">Q. GROUPING SETS(A, ROLLUP(B, C))에서 왜 이렇게 순서가 나오지?</span>

p217 <span style='color:skyblue'>②</span>

p223 <span style='color:skyblue'>②</span>

- GROUPING 함수
  - ROLLUP, CUBE, GROUPING SETS 등과 함께 쓰임
  - 소계를 나타내는 Row를 구분해줌 (원하는 위치에 원하는 텍스트 출력 가능)

p227 <span style='color:red'>④</span> - 정답: ①

- RANK: 동순위 존재시 그 수만큼 건너뛰고 다음 순위 매김
- DENSE_RANK: 동순위를 하나의 건수로 취급하여 바로 이어서 다음 순위 매김
- PARTITION BY ~ ORDER BY COUNT(*): 순위가 매겨지는 기준을 지정

p230 <span style='color:skyblue'>④</span>

p233 <span style='color:red'>④</span> - 정답: ②

- SUM([대상]) OVER ([PARTITION BY 컬럼] [ORDER BY 컬럼 ASC|DESC] [ROWS|RANGE BETWEEN A AND B])
- SUM(**`A`**) OVER(ORDER BY **`A`**) AS SUM_A
  - SUM하는 컬럼을 OVER절의 ORDER BY절에 명시해주는 경우
  - RANGE UNBOUNDED PRECEDING 구문 없이도 누적합 집계 가능

p235 <span style='color:skyblue'>①</span>

p238 <span style='color:skyblue'>③</span>

p244 <span style='color:red'>④</span> - 정답: ③

- RANGE -> N PRECEDING: 현재 행에서 값이 위로 n만큼 차이남
- ROWS -> N PRDECEDING: 현재 행에서 행이 위로 n만큼 차이남
- RANGE와 ROWS의 차이 정확하게 구별해야

p247 

<span style='color:red'>①②③④⑤</span>
<span style='color:skyblue'>①②③④⑤</span>

### 적중 예상 문제

1. 답
2. 답
3. 답